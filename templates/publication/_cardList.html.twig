
    {% for message in app.flashes('success') %}
        <p class="alert alert-success text-center">{{ message }}</p>
    {% endfor %}

    <main class="main-publication">
        <div class="publication-wrapper">
            {% for publication in publications %}
                <div class="publication-card">
                    <div class="user-publication">
                        <div class="user-publication-left-side">
                            <div class="futur-pp"></div>
                            <div class="infos-user-publication">
                                <p>{{ publication.user.nom }}
                                    {{ publication.user.prenom }}</p>
                                <p>Posté le :
                                    {{publication.createdAt | date('d/m/Y à H:i')}}</p>
                                {% if (publication.editedAt | date('d/m/Y à H:i') >
                                    publication.createdAt | date('d/m/Y à H:i')) and (app.user) %}
                                    <p>
                                        Modifié le :
                                        {{publication.editedAt | date('d/m/Y à H:i')
                                        }}<small>
                                            Par
                                            {{ app.user.nom }}
                                            {{ app.user.prenom }}</small>
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="menu-publication">
                            <div class="modal-menu-publication" id="{{ publication.titre }}" data-entry-id="{{ publication.titre }}">
                                <ul>
                                    <a href="#">Modifier</a>
                                    <a href="#">Supprimer</a>
                                </ul>
                            </div>  
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                    <h2>
                        <a href="{{ path('app_publication_show', { id: publication.id, slug: publication.slug }) }}">{{ publication.titre }}</a>
                    </h2>
                    <div>{{ publication.contenu }}</div>
                    
                    {% include '/publication/reaction.html.twig' %}

                    {% for key, img in publication.mediaPublication %}
                        {% if key == 0 %}
                            <a href="{{ path('app_show_media', { slug: img.slug }) }}">
                                <img class="card-img-top img-fluid" src="{{ asset('/uploads/' ~ img.lien) }}" alt="{{ img.titre }}"/></a>
                        {% endif %}
                    {% endfor %}

                    <a href="{{ path('app_publication_edit', { id: publication.id, slug: publication.slug }) }}">Modifier la publication</a>
                    <a href="{{ path('app_publication_delete', { id: publication.id, slug: publication.slug }) }}">Supprimer la publication</a>
                </div>
            {% endfor %}
        </div>

    </main>

{% set foo = publications|length  %}

{% block javascript %}
	<script>
		let menuBtn = document.querySelector('.menu-publication')
        {# let n = 0;

        while(n < {{ publications|length }}){
            console.log(n)
        } #}
        menuBtn.addEventListener('click', () => {
            console.log(foo)
        })
        
	</script>
{% endblock %}


